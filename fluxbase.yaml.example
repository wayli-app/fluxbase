# Fluxbase Configuration
# This file is optional - all settings can be configured via environment variables
# Environment variables use the prefix FLUXBASE_ and replace dots with underscores
# Example: server.address -> FLUXBASE_SERVER_ADDRESS

# Server configuration
server:
  address: ":8080"                      # FLUXBASE_SERVER_ADDRESS
  read_timeout: "15s"                   # FLUXBASE_SERVER_READ_TIMEOUT
  write_timeout: "15s"                  # FLUXBASE_SERVER_WRITE_TIMEOUT
  idle_timeout: "60s"                   # FLUXBASE_SERVER_IDLE_TIMEOUT
  body_limit: 2147483648                # FLUXBASE_SERVER_BODY_LIMIT (2GB)

# Database configuration
database:
  host: "localhost"                     # FLUXBASE_DATABASE_HOST
  port: 5432                            # FLUXBASE_DATABASE_PORT
  user: "postgres"                      # FLUXBASE_DATABASE_USER
  password: "postgres"                  # FLUXBASE_DATABASE_PASSWORD
  database: "fluxbase"                  # FLUXBASE_DATABASE_DATABASE
  ssl_mode: "disable"                   # FLUXBASE_DATABASE_SSL_MODE (disable, allow, prefer, require, verify-ca, verify-full)
  max_connections: 25                   # FLUXBASE_DATABASE_MAX_CONNECTIONS
  min_connections: 5                    # FLUXBASE_DATABASE_MIN_CONNECTIONS
  max_conn_lifetime: "1h"               # FLUXBASE_DATABASE_MAX_CONN_LIFETIME
  max_conn_idle_time: "30m"             # FLUXBASE_DATABASE_MAX_CONN_IDLE_TIME
  health_check_period: "1m"             # FLUXBASE_DATABASE_HEALTH_CHECK_PERIOD

# Authentication configuration
auth:
  jwt_secret: "your-secret-key-change-in-production"  # FLUXBASE_AUTH_JWT_SECRET (REQUIRED - must be changed!)
  jwt_expiry: "15m"                     # FLUXBASE_AUTH_JWT_EXPIRY
  refresh_expiry: "168h"                # FLUXBASE_AUTH_REFRESH_EXPIRY (7 days)
  magic_link_expiry: "15m"              # FLUXBASE_AUTH_MAGIC_LINK_EXPIRY
  password_reset_expiry: "1h"           # FLUXBASE_AUTH_PASSWORD_RESET_EXPIRY
  password_min_length: 8                # FLUXBASE_AUTH_PASSWORD_MIN_LENGTH
  bcrypt_cost: 10                       # FLUXBASE_AUTH_BCRYPT_COST (4-31, recommended 10-14)
  enable_signup: true                   # FLUXBASE_AUTH_ENABLE_SIGNUP
  enable_magic_link: true               # FLUXBASE_AUTH_ENABLE_MAGIC_LINK
  enable_rls: true                      # FLUXBASE_AUTH_ENABLE_RLS (Row Level Security)

# Security settings
security:
  enable_global_rate_limit: false       # FLUXBASE_SECURITY_ENABLE_GLOBAL_RATE_LIMIT

# Storage configuration
storage:
  provider: "local"                     # FLUXBASE_STORAGE_PROVIDER (local or s3)
  local_path: "./storage"               # FLUXBASE_STORAGE_LOCAL_PATH
  max_upload_size: 2147483648           # FLUXBASE_STORAGE_MAX_UPLOAD_SIZE (2GB)

  # S3 configuration (only required if provider is "s3")
  # s3_endpoint: "s3.amazonaws.com"     # FLUXBASE_STORAGE_S3_ENDPOINT
  # s3_access_key: ""                   # FLUXBASE_STORAGE_S3_ACCESS_KEY
  # s3_secret_key: ""                   # FLUXBASE_STORAGE_S3_SECRET_KEY
  # s3_bucket: ""                       # FLUXBASE_STORAGE_S3_BUCKET
  # s3_region: "us-east-1"              # FLUXBASE_STORAGE_S3_REGION

# Realtime/WebSocket configuration
realtime:
  enabled: true                         # FLUXBASE_REALTIME_ENABLED
  max_connections: 1000                 # FLUXBASE_REALTIME_MAX_CONNECTIONS
  ping_interval: "30s"                  # FLUXBASE_REALTIME_PING_INTERVAL
  pong_timeout: "60s"                   # FLUXBASE_REALTIME_PONG_TIMEOUT
  write_buffer_size: 1024               # FLUXBASE_REALTIME_WRITE_BUFFER_SIZE
  read_buffer_size: 1024                # FLUXBASE_REALTIME_READ_BUFFER_SIZE
  message_size_limit: 524288            # FLUXBASE_REALTIME_MESSAGE_SIZE_LIMIT (512KB)
  channel_buffer_size: 100              # FLUXBASE_REALTIME_CHANNEL_BUFFER_SIZE

# Email configuration
email:
  enabled: false                        # FLUXBASE_EMAIL_ENABLED
  provider: "smtp"                      # FLUXBASE_EMAIL_PROVIDER (smtp, sendgrid, mailgun, ses)
  from_address: "noreply@localhost"     # FLUXBASE_EMAIL_FROM_ADDRESS
  from_name: "Fluxbase"                 # FLUXBASE_EMAIL_FROM_NAME
  reply_to_address: ""                  # FLUXBASE_EMAIL_REPLY_TO_ADDRESS

  # SMTP configuration (required if provider is "smtp")
  smtp_host: ""                         # FLUXBASE_EMAIL_SMTP_HOST
  smtp_port: 587                        # FLUXBASE_EMAIL_SMTP_PORT
  smtp_username: ""                     # FLUXBASE_EMAIL_SMTP_USERNAME
  smtp_password: ""                     # FLUXBASE_EMAIL_SMTP_PASSWORD
  smtp_tls: true                        # FLUXBASE_EMAIL_SMTP_TLS

  # SendGrid configuration (required if provider is "sendgrid")
  # sendgrid_api_key: ""                # FLUXBASE_EMAIL_SENDGRID_API_KEY

  # Mailgun configuration (required if provider is "mailgun")
  # mailgun_api_key: ""                 # FLUXBASE_EMAIL_MAILGUN_API_KEY
  # mailgun_domain: ""                  # FLUXBASE_EMAIL_MAILGUN_DOMAIN

  # AWS SES configuration (required if provider is "ses")
  # ses_access_key: ""                  # FLUXBASE_EMAIL_SES_ACCESS_KEY
  # ses_secret_key: ""                  # FLUXBASE_EMAIL_SES_SECRET_KEY
  # ses_region: "us-east-1"             # FLUXBASE_EMAIL_SES_REGION

  # Email templates (optional)
  # magic_link_template: ""             # FLUXBASE_EMAIL_MAGIC_LINK_TEMPLATE
  # verification_template: ""           # FLUXBASE_EMAIL_VERIFICATION_TEMPLATE
  # password_reset_template: ""         # FLUXBASE_EMAIL_PASSWORD_RESET_TEMPLATE

# General settings
base_url: "http://localhost:8080"       # FLUXBASE_BASE_URL (must include http:// or https://)
debug: false                            # FLUXBASE_DEBUG (enables debug logging)
